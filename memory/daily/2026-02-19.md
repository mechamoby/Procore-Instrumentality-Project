# 2026-02-19 — Full Day Log

## Morning/Afternoon (Nick at work, Moby autonomous)

### OpenClaw Update 2026.2.15 → 2026.2.19-2
- Major update with security hardening
- **Broke CLI/subagent connections**: New security blocks plaintext WS to non-loopback addresses
- **Fix**: Changed `gateway.bind` from `lan` to `loopback` in openclaw.json
- Gateway still listens on 0.0.0.0:18789 (NERV LAN access works), but CLI resolves to 127.0.0.1
- Had to approve a device pairing request (new auth requirement)
- Changelog highlights: Sonnet 4.6 support, 1M context opt-in, subagent improvements, massive security batch, Apple Watch MVP

### Tactical Review
- Subagent attempted full project review but burned through context without writing output
- Moby did it manually — wrote `memory/eva/tactical-review-2026-02-19.md`
- **Honest assessment**: Excellent architecture and design, but pre-MVP state. The actual product (agent that talks to Procore) doesn't exist as running code yet.
- Critical path: Procore auth → MAGI sprint → EVA-00 code → demo

### Regulatory Documents Downloaded
- Subagent downloaded 33 PDFs, 123MB across 10 categories
- FBC, ADA, LEED, FGBC, FHFC, Miami-Dade, City of Miami, OSHA, NFPA, ASCE
- Stored in `shared-knowledge/regulatory/` with MASTER-INDEX.md
- Nick noted he should source these himself eventually — keeping for now to test with

### Security Architecture
- Wrote 7-layer client deployment security doc: `nerv-deploy/docs/SECURITY-ARCHITECTURE.md`
- Created DB security roles: `nerv-deploy/database/security-roles.sql`
- eva_agent role: INSERT/SELECT only on critical tables, no DELETE/TRUNCATE
- Updated THE-THIRD-IMPACT.md Section 10 with client security
- Pushed to GitHub (commit 0a19f94)

### ClawHub Warning
- Nick shared @chiefofautism tweet about 1,184 malicious skills on ClawHub marketplace
- Verified: our system is clean — all skills openclaw-bundled, all plugins stock
- Added to MEMORY.md security notes: never install ClawHub skills

### Crypto Bait
- Nick shared @0xDPool Polymarket bot tweet — engagement bait, fake returns
- Confirmed: not relevant, stay focused on construction AI

## Evening

### Procore OAuth Re-Authentication ✅
- **Root cause of repeated failures**: Using production auth URL (`login.procore.com`) for sandbox app
- **Fix**: Must use `login-sandbox.procore.com` for both authorize AND token exchange
- **Second issue**: Redirect URI must be `http://localhost:...` — Procore rejects non-localhost HTTP URIs
- Changed redirect URI in Developer Portal + auth script
- Nick opened Brave on Moby-1, authorized via sandbox login
- Token saved and verified working against `sandbox.procore.com/rest/v1.0/me`
- Full troubleshooting documented: `memory/eva/procore-api/oauth-troubleshooting.md`
- **Lesson**: Auth URLs, token URLs, and API base URLs must ALL match the same environment (sandbox vs production)

### MAGI Sprint 1 COMPLETE ✅
- Subagent ran ~30 min on Sonnet, explored 8 major API categories
- **10 endpoint docs written** in `memory/eva/procore-api/`
- Key findings:
  - Daily Logs: 18 sub-types, require date range, max 13 weeks per query
  - RFIs: 134 total (confirmed correct), v1.1 API, filter needs `[]` brackets
  - Submittals: 146 total, status filter broken
  - Documents: 25 records, flat with parent_id tree
  - Meetings: v1.1, grouped response (must flatten)
  - Cost Codes: 304, Vendors: 118, Users: 554
  - Webhooks: working for real-time updates
  - Change Events/Punch Lists: modules not enabled — Nick says skip
- Cross-reference map built: RFIs → specs → submittals → vendors → users → cost codes
- All findings committed to MEMORY.md, MAGI workspace, THE-THIRD-IMPACT.md

### NERV Interface Boot Context Fix
- NERV session (`agent:main:nerv`) is separate from Telegram (`agent:main:main`)
- Fresh sessions didn't load project context — agent didn't know about MAGI
- Added boot preamble to server.py that forces agent to read MEMORY.md on first message
- First attempt too soft — agent ignored it. Made it MANDATORY with explicit file list
- NERV restarted and working
- **Root issue found**: MAGI wasn't in MEMORY.md! Added it.

### New Protocol: Rei Clone Reset
- Nick established: sending the Rei Ayanami clones image = save all state + start fresh session
- Image saved to `protocols/rei-clone-reset.jpg`

### Reminders Set
- 9:00 PM — Scrub Procore sandbox RFIs (Nick says should be more than 134)
- 9:30 PM — Katsuragi soul file kickoff

### Evening Task List (7 PM cron)
- Delivered status update via heartbeat

## Infrastructure State (End of Day)
- OpenClaw: 2026.2.19-2, gateway on 0.0.0.0:18789, bind=loopback in config
- NERV: Running on port 8080 with boot preamble
- Procore: Sandbox token LIVE, auto-refresh available
- MAGI: Registered agent, Sprint 1 complete
- Cron jobs: evening tasks (weekdays 7pm), RFI scrub (9pm tonight), Katsuragi (9:30pm tonight)
- GitHub: nerv-deploy updated with security architecture

## Late Night Session (~9:30 PM - 10:12 PM)

### Submittal PDF Received for EVA-01 Test
- Nick sent an LG product submittal PDF (no context) — testing the EVA-01 intake flow
- Was mid-analysis when Rei Clone Reset triggered

### Rei Clone Reset #1 — 10:12 PM
- Nick sent Rei clones image x3
- All critical state saved to daily log and MEMORY.md
- Context cleared for fresh session

### EVA-01 Full Flow Demo — WORKING ✅ (~10:15-10:35 PM)
- Nick sent LG LDFC2423 dishwasher spec sheet PDF (no context)
- EVA-01 flow executed end-to-end:
  1. PDF text extraction via PyMuPDF
  2. Product analysis (specs, compliance flags — caught not ADA compliant)
  3. PM approval via Telegram (Nick said "hits approve")
  4. Miller Construction stamp + Date Received (02/19/2026) applied to page 1
  5. Token refresh (was expired — 90 min expiry, auto-refresh cron is MUST)
  6. Submittal created in Procore sandbox (#EVA-001, ID: 210982)
  7. Stamped PDF attached successfully
- **Procore requires `number` field** — can't create without it. Decision: use placeholder `TBD-XXX` since it auto-populates when PM sets spec section

### Refinements from Nick's Review
1. **Status should be "open" not "draft"** — Procore doesn't really have draft via API
2. **File naming wrong** — must follow `{Project} - {Title} - {Date}.pdf` convention
3. **PM can override title** in approval message
4. **Placeholder submittal number** — `TBD-XXX` auto-increment, replaced when spec section set

### MAJOR Architecture Decision: Multi-Project Multi-User
- Nick corrected assumption: it's NOT one NERV = one project
- Target clients are mid-size to big GCs with MULTIPLE active projects
- **Decision: Option B** — One EVA per company, multi-project aware
  - Single agent instance, user profiles in PostgreSQL
  - Agent looks up who's talking → their role → their projects
  - PM sends PDF → EVA asks "Which project?" or infers from context
  - Execs get cross-project visibility
- This is a significant architecture change that needs to be designed into EVA-00's DB schema

### Rei Clone Reset #2 — ~10:45 PM
- Nightly Action Plan from Nick (screenshot):
  - **TOP PRIORITY: Get NERV Command Interface fully operational, especially attachments**
- Option B multi-project confirmed
- All state saved

## Key Decisions Made Today
- Skip Change Events and Punch Lists (not enabled in sandbox, not priority)
- Keep downloaded regulatory docs for testing, Nick will curate later
- NERV sessions need mandatory boot preamble to load context
- Rei Clone image = save-and-reset protocol
- Token management is a prerequisite for client deployments (must solve before shipping)
